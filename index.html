<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="fonts/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="js/libs/jquery.scrollify.js"></script>
    <script src="js/animations/logo.js"></script>
    <script src="js/animations/logo_dot.js"></script>
    <script src="js/main.js"></script>
    <script src="js/index/index.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>Craft IT</title>
    <script>
        $(document).ready(function () {
            setTimeout(function () {
                $('.craft-footer').addClass('animated');
                addHeader();
                var isSCrolling = false;
                let arrow = $('.arrow-down');
                let footerAnimations = $('.craft-footer .footer-item');
                let animationCount = 0;
                for (var i = 0; i < footerAnimations.length; i++) {
                    let animationIndex = $(footerAnimations[i]).attr('animation-order');
                    if (animationIndex > animationCount)
                        animationCount = animationIndex;
                }

                let currentAnimationIndex = 0;
                arrow.on('click', function () {
                    isSCrolling = true;
                    footerAnimation(-1);
                });

                $(window).on('wheel', function (e) {
                    if (isSCrolling)
                        return;

                    isSCrolling = true;
                    let delta = getDelta(e);
                    footerAnimation(delta);
                });

                function footerAnimation(delta) {

                    let animationCount = getAnimationCount();

                    delta < 0 ? ++currentAnimationIndex /* to down*/ : --currentAnimationIndex; /* to up*/
                    if (currentAnimationIndex < 0)
                        currentAnimationIndex = 0;
                    else if (currentAnimationIndex > animationCount)
                        currentAnimationIndex = animationCount;

                    let currentItem = animationCount == footerAnimations.length - 1 ? $(footerAnimations[currentAnimationIndex]) :
                        $(footerAnimations).filter('[animation-index=' + currentAnimationIndex + ']').first();

                    let container = $('.footer-container');
                    container.animate({ top: -currentItem.position().top + 20 }, 1500, function () {
                        currentAnimationIndex == animationCount ? arrow.hide() : arrow.show();
                        isSCrolling = false;
                    });
                }

                function getDelta(e) {
                    let value;
                    if (e.originalEvent) {
                        value = e.originalEvent.wheelDelta || -e.originalEvent.deltaY || -e.originalEvent.detail;
                    } else {
                        value = e.wheelDelta || -e.deltaY || -e.detail;
                    }

                    return Math.max(-1, Math.min(1, value));
                }

                function getAnimationCount() {
                    let animationCount = 0;
                    for (var i = 0; i < footerAnimations.length; i++) {
                        let animationIndex = $(footerAnimations[i]).attr('animation-index');
                        if (animationIndex > animationCount)
                            animationCount = animationIndex;
                        else if (animationCount != 0) {
                            let currentTop = $(footerAnimations[i]);
                            let oldTop = $(footerAnimations[i - 1]);

                            if (oldTop.position().top != currentTop.position().top)
                                animationCount++;
                        }
                    }

                    return animationCount;
                }

                //$(window).on('resize', function (e) {
                //    if (isSCrolling)
                //        return;
                //    isSCrolling = true;
                //    let animationCount = getAnimationCount();

                //    if (currentAnimationIndex < 0)
                //        currentAnimationIndex = 0;
                //    else if (currentAnimationIndex > animationCount)
                //        currentAnimationIndex = animationCount;

                //    let currentItem = animationCount == footerAnimations.length - 1 ? $(footerAnimations[currentAnimationIndex]) :
                //        $(footerAnimations).filter('[animation-index=' + currentAnimationIndex + ']').first();

                //    console.log('current item : ' + currentItem.attr('animation-index'));
                //    let container = $('.footer-container');
                //    //let delta = Math.abs(currentItem.position().top + $('.footer-container').position().top);
                //    container.animate({ top: -currentItem.position().top + 20 }, 1000, function () {
                //        currentAnimationIndex == animationCount ? arrow.hide() : arrow.show();
                //        isSCrolling = false;
                //    });
                //});
            }, 800);
        });
    </script>
    <style>

        :root {
            --color-menu-item: var(--black);
            --color-menu-item-hover: var(--black);
            --text-color: var(--white);
        }

        /*Arrow scrolling*/
        .btn-next-page {
            transform: matrix(1, 0, 0, 1, 0, 0);
            z-index: 999999;
            position: absolute;
            bottom: 0;
            left: 50%;
        }

            .btn-next-page .arrow-down {
                display: block;
                margin: 0 auto;
                opacity: 0;
                animation: jump .6s linear alternate infinite;
                animation-fill-mode: forwards;
            }

            .btn-next-page i.arrow-down {
                font-size: 50px;
                color: white;
                cursor: pointer;
            }

        @keyframes jump {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 1;
                transform: translateY(10px);
            }
        }
        /*Arrow scrolling*/

        div.container {
            padding: 0;
            height: 100%;
            width: 100%;
            display: grid;
            align-self: stretch;
            grid-template-columns: 0.2fr 1fr 0.2fr;
            grid-template-rows: 1fr;
            grid-template-areas: ". content .";
        }

        div.content {
            position: relative;
            grid-area: content;
            display: grid;
            place-content: center;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr;
            place-items: center;
            justify-items: start;
            align-items: center;
        }

        .content-menu {
            width: 100%;
        }

        .footer-item {
            position: absolute;
        }

        :is(.dream, .draft, .craft) img {
            width: 80%;
            min-width: 130px;
        }

        .text {
            padding-top: 2vw;
        }

        .dream, .draft, .craft {
            top: 115%;
        }

        .dream {
            width: 25%;
            left: 10%;
        }

        .draft {
            left: 42%;
            width: 21%;
        }

        .craft {
            left: 71%;
            width: 20%;
        }

        .menu-item-arrow {
            display: none;
        }

        .not-you {
            opacity: 0;
            animation: notYou 1s ease 1s forwards;
        }

        @keyframes notYou {
            to {
                opacity: 1;
            }
        }

        /*   NEW */
        logo-loading {
            position: fixed;
            display: grid;
            place-self: stretch;
            width: 100%;
            height: 70%;
            place-content: center;
        }

        @media only screen and (max-width: 1000px) {
            logo-loading {
                height: 50%;
            }

            .craft-footer {
                height: 60%;
                bottom: -60%;
            }
        }

        @media only screen and (max-width: 500px) {
            .footer-item {
                position: relative;
            }

                .footer-item[animation-index="0"] {
                    font-size: 20px !important;
                }

            :is(.dream, .draft, .craft) img {
                width: 80%;
                min-width: 130px;
            }


            .dream, .draft, .craft {
                width: 80%
            }

            .dream {
                left: 10%;
            }

            .draft, .craft {
                left: 10%;
                padding-top: 30px;
            }
        }
    </style>
</head>
<body>
    <section class="craft-it">
        <logo-loading>
            <div class="p logo-effect-container animated" style="">
                <div class="content-image">
                    <img class="logo-effect" src="images/logo/CRAFT-IT_Logo_Craft-IT_BASELINE.svg" alt="Craft-It Logo">
                    <div class="p letter_a"></div>
                    <div class="p cr"></div>
                    <div class="p ft"></div>
                    <div class="p it_makes_sense"></div>
                    <div class="p red_circle"></div>
                </div>
            </div>
        </logo-loading>
        <div class="craft-footer content-menu-display" data-display="footer">
            <div class="btn-next-page"><i class="arrow-down fa fa-chevron-down" aria-hidden="true" alt="next-section"></i></div>
            <div class="footer-container">
                <div class="footer-item" animation-index="0" style="font-size: 30px; width: 100%; top: 15%;">
                    <div class="" style=" display: flex; flex-direction: column; align-items: center;">
                        <p style="font-family: gothamLight !important; color: var(--black); align-self: start;">
                            I.T. Workshop for bespoken solution in risk management.
                        </p>
                        <p></p>
                        <p style="font-family: gothamBold !important; align-self: end;">
                            We believe it's up to the I.T. to adapt to your needs.
                            <span style="font-family: gothamBold !important;" class="not-you">Not you.</span>
                        </p>
                    </div>
                </div>
                <div class="footer-item dream" animation-index="1">
                    <div class="">
                        <img src="images/Dream_IT_Neg.svg" />
                        <p class="text">
                            We observe your vision, assess your requirements and devise a blueprint for your project.
                        </p>
                    </div>
                </div>
                <div class="footer-item draft" animation-index="1">
                    <div class="">
                        <img src="images/Draft_IT_Neg.svg" />
                        <p class="text">
                            We appropriate your vision and convert it into an elaborate masterplan for the solution we will shape.
                        </p>
                    </div>
                </div>
                <div class="footer-item craft" animation-index="1">
                    <div class="">
                        <img src="images/Craft_IT_Neg.svg" />
                        <p class="text">
                            We use our expertise and experience to develop the masterplan into a premium, seamless software tailored to your needs and transcending expectations.
                        </p>
                    </div>
                </div>
                <div class="footer-item button" animation-index="2" style="top: 210%; width: 100%">
                    <div class="" style="display: flex; flex-direction: column; align-items: center;">
                        <h1 class="text" style="padding-bottom: 2vw;">
                            Discover what we do
                        </h1>
                        <button class="find-out" onclick="redirect('expertise', 'var(--red)')">
                            <span class="arrow">More</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>
